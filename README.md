# Community-Forums
    使用kaptcha去生成验证码，Redis优化验证码保存，解决分布式session问题；利用Redis的zset并结合Redis实现点赞关注的功能；使用Kafka实现异步的发送消息通知；使用Elasticsearch实现对帖子的搜索功能等，完成基础功能实现。
    准备工作就是一些工作环境的配置，IDE使用IntellijIDEA，具体的框架的版本与配置，以及mysql，redis，kafka，es的安装与配置。
1、权限部分：
   邮箱注册、登录部分的实现
   注册是登录功能是每个网站最基本的功能，实现的主要难点我觉得在于怎么解决分布式Session问题，密码安全问题，以及怎么优化登录的问题。

2、Kaptcha生成验证码
    Loginticket生成凭证 记录登录状态
    本项目中先采用将用户登录信息存到数据库的login_ticket表中，后续采用存到redis中优化。
    将用户登录凭证ticket存到mysql的login_ticket表中
    登陆成功的时候生成登录凭证，生成Loginticket往数据库login_ticket存，并且被设置为cookie，下次用户登录的时候会带上这个ticket，ticket是个随机的UUID字符串，有过期的时间expired和有效的状态status。
    
3、发表评论以及私信
    评论的是每一个帖子都评论，并且支持对评论进行评论，也就是评论的回复，能够显示评论的数量，具体的内容，以及评论人回复人等。
私信是支持两个用户之间发送消息，有一个唯一的会话id，以用户id小的开头，id大的结尾比如12_111，以varchar的形式存储到数据库中，这个会话里可以有多条两个用户交互的消息。

4、使用Redis实现点赞关注
    支持对帖子、评论点赞。
    第一次点赞，第2次取消点赞(判断userId在不在set集合中，就可以判断用户有否点过赞，如果已经点过赞了，就将用户从集合中删除)。
    在查询某人对某实体的点在状态时，用可以用boolean作为返回值，但项目中使用int（支持业务扩展，可以支持是否点踩）。
    
5、实现异步消息系统
    在项目中，会有一些不需要实时执行但是是非常频繁的操作或者任务，为了提升网站的性能，可以使用异步消息的形式进行发送，再次消息队列服务器kafka来实现。
    
6、Elastic Search 实现网站的搜索功能
    搜索服务
将帖子保存到Elasticsearch服务器
从 Elasticsearch 服务器中删除帖子
从 Elasticsearch 服务器搜索帖子
    发布事件（将发帖或者更改帖子的事件存到kafka中，消费事件并将帖子存到es服务器中）
发布帖子时，将帖子异步的提交到Elasticsearch服务器
增加评论的时候，将帖子异步的提交到Elasticsearch服务
在kafka消费组件中增加一个方法，消费帖子发布事件
    显示结果
在控制器中处理搜索请求，在HTML高亮显示搜索结果
